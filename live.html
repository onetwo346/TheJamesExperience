<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Live Events - TheJamesExperience</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="pages.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700;900&family=Inter:wght@300;400;500;600;700&family=Caveat:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
</head>
<body>
    <nav class="navbar" id="navbar">
        <div class="nav-container">
            <a href="index.html" class="logo">
                <span class="logo-icon"><i class="fa-solid fa-feather-pointed"></i></span>
                <span class="logo-text">TheJames<span class="logo-accent">Experience</span></span>
            </a>
            <button class="mobile-menu-toggle" id="mobileMenuToggle" aria-label="Toggle menu">
                <span></span>
                <span></span>
                <span></span>
            </button>
            <ul class="nav-menu" id="navMenu">
                <li><a href="index.html"><i class="fa-solid fa-house"></i> Home</a></li>
                <li><a href="about.html"><i class="fa-solid fa-user-pen"></i> About</a></li>
                <li><a href="books.html"><i class="fa-solid fa-book-open"></i> Books</a></li>
                <li><a href="blog.html"><i class="fa-solid fa-newspaper"></i> Blog</a></li>
                <li><a href="live.html" class="active"><i class="fa-solid fa-tower-broadcast"></i> Live</a></li>
                <li><a href="community.html"><i class="fa-solid fa-users"></i> Community</a></li>
                <li><a href="contact.html" class="nav-cta"><i class="fa-solid fa-paper-plane"></i> Contact</a></li>
            </ul>
        </div>
    </nav>

    <section class="page-hero">
        <div class="container">
            <h1 class="page-title">Live Events</h1>
            <p class="page-subtitle">Connect with me in real-time through live streams and Q&A sessions</p>
        </div>
    </section>

    <!-- Live Banner (shown when admin is live) -->
    <div id="liveBanner" style="display:none;position:fixed;top:0;left:0;right:0;z-index:9999;background:linear-gradient(135deg,#e74c3c,#c0392b);color:#fff;text-align:center;padding:0.5rem 1rem;font-size:0.8rem;font-weight:700;">
        <span style="display:inline-block;width:8px;height:8px;border-radius:50%;background:#fff;margin-right:0.5rem;animation:lp 1.2s infinite;"></span>
        <span id="liveBannerText">LIVE NOW</span>
        <style>@keyframes lp{0%,100%{opacity:1}50%{opacity:0.4}}</style>
    </div>

    <section class="live-now" id="liveNow" style="display:none; background:#0f0f1a; padding:2rem 0;">
        <div class="container">
            <div class="live-indicator" style="display:flex;align-items:center;gap:0.6rem;margin-bottom:1rem;">
                <span class="live-dot" style="width:10px;height:10px;border-radius:50%;background:#e74c3c;animation:lp 1.2s infinite;display:inline-block;"></span>
                <span class="live-text" style="font-weight:800;font-size:0.85rem;color:#e74c3c;letter-spacing:0.1em;">LIVE NOW</span>
                <span id="livePlatformBadge" style="background:rgba(231,76,60,0.15);border:1px solid rgba(231,76,60,0.3);color:#e74c3c;border-radius:50px;font-size:0.7rem;padding:0.15rem 0.6rem;"></span>
            </div>
            <h2 id="liveTitle" style="font-family:'Playfair Display',serif;font-size:1.5rem;color:#fff;margin-bottom:0.4rem;"></h2>
            <p id="liveDesc" style="font-size:0.82rem;color:rgba(255,255,255,0.5);margin-bottom:1.5rem;"></p>
            <div class="live-stream-container">
                <div id="liveStreamEmbed" class="live-stream-placeholder" style="background:#1a1a2e;border-radius:12px;overflow:hidden;aspect-ratio:16/9;display:flex;align-items:center;justify-content:center;">
                    <!-- embed or placeholder injected by JS -->
                </div>
                <div class="live-chat" id="liveChatBox">
                    <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:0.75rem;">
                        <h4 style="color:#fff;font-size:0.9rem;"><i class="fa-solid fa-comments"></i> Live Chat</h4>
                        <span id="chatUserBadge" style="font-size:0.68rem;color:rgba(255,255,255,0.4);"></span>
                    </div>
                    <div class="chat-messages" id="chatMessages" style="background:#13131f;border-radius:8px;padding:0.75rem;max-height:280px;overflow-y:auto;margin-bottom:0.75rem;"></div>
                    <div id="chatInputArea"></div>
                </div>
            </div>
        </div>
    </section>

    <!-- Offline Live Section -->
    <section id="liveOffline" style="padding:2.5rem 0;background:#f8f4ef;">
        <div class="container" style="text-align:center;">
            <div style="display:inline-flex;align-items:center;gap:0.5rem;background:rgba(38,70,83,0.08);border:1px solid rgba(38,70,83,0.12);border-radius:50px;padding:0.35rem 1rem;font-size:0.72rem;font-weight:700;color:rgba(38,70,83,0.5);letter-spacing:0.06em;margin-bottom:1rem;">
                <span style="width:7px;height:7px;border-radius:50%;background:rgba(38,70,83,0.3);display:inline-block;"></span> NOT LIVE RIGHT NOW
            </div>
            <h2 style="font-family:'Playfair Display',serif;font-size:1.6rem;font-weight:900;color:#264653;margin-bottom:0.5rem;">Next Live Session Coming Soon</h2>
            <p style="font-size:0.85rem;color:rgba(38,70,83,0.6);margin-bottom:1.5rem;">Sign up to get notified the moment James goes live.</p>
            <a href="user-auth.html?redirect=live.html" class="btn btn-primary" style="display:inline-flex;align-items:center;gap:0.5rem;"><i class="fa-solid fa-bell"></i> Notify Me When Live</a>
        </div>
    </section>

    <section class="upcoming-events">
        <div class="container">
            <h2 class="section-title">Upcoming Events</h2>
            <p class="section-subtitle">Mark your calendar and join me live</p>
            
            <div class="events-list">
                <div class="event-card upcoming">
                    <div class="event-date">
                        <div class="event-month">FEB</div>
                        <div class="event-day">28</div>
                    </div>
                    <div class="event-details">
                        <h3>Live Q&A Session: Ask Me Anything</h3>
                        <div class="event-info">
                            <span class="event-time">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <circle cx="12" cy="12" r="10"></circle>
                                    <polyline points="12 6 12 12 16 14"></polyline>
                                </svg>
                                7:00 PM EST
                            </span>
                            <span class="event-duration">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                                    <line x1="16" y1="2" x2="16" y2="6"></line>
                                    <line x1="8" y1="2" x2="8" y2="6"></line>
                                    <line x1="3" y1="10" x2="21" y2="10"></line>
                                </svg>
                                90 minutes
                            </span>
                            <span class="event-platform">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M22.54 6.42a2.78 2.78 0 0 0-1.94-2C18.88 4 12 4 12 4s-6.88 0-8.6.46a2.78 2.78 0 0 0-1.94 2A29 29 0 0 0 1 11.75a29 29 0 0 0 .46 5.33A2.78 2.78 0 0 0 3.4 19c1.72.46 8.6.46 8.6.46s6.88 0 8.6-.46a2.78 2.78 0 0 0 1.94-2 29 29 0 0 0 .46-5.25 29 29 0 0 0-.46-5.33z"></path>
                                </svg>
                                YouTube Live
                            </span>
                        </div>
                        <p class="event-description">Join me for an interactive Q&A session where I'll answer your questions about writing, my books, and the creative process. Submit your questions in advance or ask them live!</p>
                        <div class="event-actions">
                            <button class="btn btn-primary" onclick="rsvpEvent(this)">RSVP Now</button>
                            <button class="btn btn-secondary" onclick="addToCalendar()">Add to Calendar</button>
                            <button class="notify-btn" onclick="toggleNotification(this)">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
                                    <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
                                </svg>
                                Notify Me
                            </button>
                        </div>
                    </div>
                </div>

                <div class="event-card upcoming">
                    <div class="event-date">
                        <div class="event-month">MAR</div>
                        <div class="event-day">08</div>
                    </div>
                    <div class="event-details">
                        <h3>Book Reading & Discussion: The Final Chapter</h3>
                        <div class="event-info">
                            <span class="event-time">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <circle cx="12" cy="12" r="10"></circle>
                                    <polyline points="12 6 12 12 16 14"></polyline>
                                </svg>
                                6:00 PM EST
                            </span>
                            <span class="event-duration">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                                    <line x1="16" y1="2" x2="16" y2="6"></line>
                                    <line x1="8" y1="2" x2="8" y2="6"></line>
                                    <line x1="3" y1="10" x2="21" y2="10"></line>
                                </svg>
                                60 minutes
                            </span>
                            <span class="event-platform">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <rect x="2" y="2" width="20" height="20" rx="5" ry="5"></rect>
                                    <path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path>
                                </svg>
                                Instagram Live
                            </span>
                        </div>
                        <p class="event-description">I'll be reading select passages from "The Final Chapter" and discussing the inspiration behind the story. Perfect for fans of the series!</p>
                        <div class="event-actions">
                            <button class="btn btn-primary" onclick="rsvpEvent(this)">RSVP Now</button>
                            <button class="btn btn-secondary" onclick="addToCalendar()">Add to Calendar</button>
                            <button class="notify-btn" onclick="toggleNotification(this)">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
                                    <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
                                </svg>
                                Notify Me
                            </button>
                        </div>
                    </div>
                </div>

                <div class="event-card upcoming">
                    <div class="event-date">
                        <div class="event-month">MAR</div>
                        <div class="event-day">22</div>
                    </div>
                    <div class="event-details">
                        <h3>Writing Workshop: Crafting Compelling Plots</h3>
                        <div class="event-info">
                            <span class="event-time">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <circle cx="12" cy="12" r="10"></circle>
                                    <polyline points="12 6 12 12 16 14"></polyline>
                                </svg>
                                5:00 PM EST
                            </span>
                            <span class="event-duration">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                                    <line x1="16" y1="2" x2="16" y2="6"></line>
                                    <line x1="8" y1="2" x2="8" y2="6"></line>
                                    <line x1="3" y1="10" x2="21" y2="10"></line>
                                </svg>
                                120 minutes
                            </span>
                            <span class="event-platform">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <rect x="2" y="7" width="20" height="15" rx="2" ry="2"></rect>
                                    <polyline points="17 2 12 7 7 2"></polyline>
                                </svg>
                                Zoom
                            </span>
                        </div>
                        <p class="event-description">An interactive workshop for aspiring writers. Learn techniques for developing engaging plots and story structures. Limited spots available!</p>
                        <div class="event-actions">
                            <button class="btn btn-primary" onclick="rsvpEvent(this)">RSVP Now</button>
                            <button class="btn btn-secondary" onclick="addToCalendar()">Add to Calendar</button>
                            <button class="notify-btn" onclick="toggleNotification(this)">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
                                    <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
                                </svg>
                                Notify Me
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="past-events">
        <div class="container">
            <h2 class="section-title">Past Events Archive</h2>
            <p class="section-subtitle">Watch recordings of previous live sessions</p>
            
            <div class="archive-grid">
                <div class="archive-card">
                    <div class="archive-thumbnail">
                        <div class="archive-placeholder">
                            <svg width="60" height="60" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="10"></circle>
                                <polygon points="10 8 16 12 10 16 10 8" fill="currentColor"></polygon>
                            </svg>
                        </div>
                        <div class="archive-duration">1:32:45</div>
                    </div>
                    <div class="archive-info">
                        <h4>New Year Q&A Special</h4>
                        <p class="archive-date">January 15, 2024</p>
                        <p class="archive-views">2,543 views</p>
                    </div>
                </div>

                <div class="archive-card">
                    <div class="archive-thumbnail">
                        <div class="archive-placeholder">
                            <svg width="60" height="60" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="10"></circle>
                                <polygon points="10 8 16 12 10 16 10 8" fill="currentColor"></polygon>
                            </svg>
                        </div>
                        <div class="archive-duration">58:12</div>
                    </div>
                    <div class="archive-info">
                        <h4>Character Development Masterclass</h4>
                        <p class="archive-date">December 10, 2023</p>
                        <p class="archive-views">3,892 views</p>
                    </div>
                </div>

                <div class="archive-card">
                    <div class="archive-thumbnail">
                        <div class="archive-placeholder">
                            <svg width="60" height="60" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="10"></circle>
                                <polygon points="10 8 16 12 10 16 10 8" fill="currentColor"></polygon>
                            </svg>
                        </div>
                        <div class="archive-duration">1:15:30</div>
                    </div>
                    <div class="archive-info">
                        <h4>Behind the Scenes: Writing Process</h4>
                        <p class="archive-date">November 22, 2023</p>
                        <p class="archive-views">4,201 views</p>
                    </div>
                </div>

                <div class="archive-card">
                    <div class="archive-thumbnail">
                        <div class="archive-placeholder">
                            <svg width="60" height="60" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="10"></circle>
                                <polygon points="10 8 16 12 10 16 10 8" fill="currentColor"></polygon>
                            </svg>
                        </div>
                        <div class="archive-duration">45:18</div>
                    </div>
                    <div class="archive-info">
                        <h4>Book Launch Celebration</h4>
                        <p class="archive-date">October 5, 2023</p>
                        <p class="archive-views">5,678 views</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <footer class="footer">
        <div class="container">
            <div class="footer-grid">
                <div class="footer-section">
                    <h3>TheJamesExperience</h3>
                    <p>Where stories come alive and readers become part of the journey.</p>
                    <div class="social-links">
                        <a href="#" class="social-link" aria-label="Facebook">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"></path>
                            </svg>
                        </a>
                        <a href="#" class="social-link" aria-label="Twitter">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"></path>
                            </svg>
                        </a>
                        <a href="#" class="social-link" aria-label="Instagram">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="2" y="2" width="20" height="20" rx="5" ry="5"></rect>
                                <path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path>
                                <line x1="17.5" y1="6.5" x2="17.51" y2="6.5"></line>
                            </svg>
                        </a>
                        <a href="#" class="social-link" aria-label="YouTube">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M22.54 6.42a2.78 2.78 0 0 0-1.94-2C18.88 4 12 4 12 4s-6.88 0-8.6.46a2.78 2.78 0 0 0-1.94 2A29 29 0 0 0 1 11.75a29 29 0 0 0 .46 5.33A2.78 2.78 0 0 0 3.4 19c1.72.46 8.6.46 8.6.46s6.88 0 8.6-.46a2.78 2.78 0 0 0 1.94-2 29 29 0 0 0 .46-5.25 29 29 0 0 0-.46-5.33z"></path>
                                <polygon points="9.75 15.02 15.5 11.75 9.75 8.48 9.75 15.02" fill="#fff"></polygon>
                            </svg>
                        </a>
                    </div>
                </div>
                
                <div class="footer-section">
                    <h4>Quick Links</h4>
                    <ul>
                        <li><a href="about.html">About</a></li>
                        <li><a href="books.html">Books</a></li>
                        <li><a href="blog.html">Blog</a></li>
                        <li><a href="live.html">Live Events</a></li>
                    </ul>
                </div>
                
                <div class="footer-section">
                    <h4>Community</h4>
                    <ul>
                        <li><a href="community.html">Reader's Corner</a></li>
                        <li><a href="community.html#forums">Forums</a></li>
                        <li><a href="community.html#spotlight">Reader Spotlight</a></li>
                        <li><a href="contact.html">Contact</a></li>
                    </ul>
                </div>
                
                <div class="footer-section">
                    <h4>Legal</h4>
                    <ul>
                        <li><a href="#">Privacy Policy</a></li>
                        <li><a href="#">Terms of Service</a></li>
                        <li><a href="#">Cookie Policy</a></li>
                    </ul>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p>&copy; 2024 TheJamesExperience. All rights reserved. | <a href="admin-login.html" style="color:var(--text-light);text-decoration:none;transition:color 0.2s;" onmouseover="this.style.color='var(--primary-color)'" onmouseout="this.style.color='var(--text-light)'"><i class="fa-solid fa-shield-halved"></i> Admin Portal</a></p>
            </div>
        </div>
    </footer>

    <button class="scroll-to-top" id="scrollToTop">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="18 15 12 9 6 15"></polyline>
        </svg>
    </button>

    <script src="script.js"></script>
    <script src="auth.js"></script>
    <script src="nav-auth.js"></script>
    <script src="live.js"></script>
    <script>
    (function() {
        const CHAT_KEY = 'tje_live_chat';
        const state = AUTH.getLiveState();
        const user = AUTH.getCurrentUser();

        if (state.isLive) {
            // Show live banner
            const banner = document.getElementById('liveBanner');
            banner.style.display = 'block';
            document.getElementById('liveBannerText').textContent = '\uD83D\uDD34 LIVE NOW: ' + state.title;
            document.body.style.paddingTop = '36px';
            const navbar = document.getElementById('navbar');
            if (navbar) navbar.style.top = '36px';

            // Show live section, hide offline
            document.getElementById('liveNow').style.display = 'block';
            document.getElementById('liveOffline').style.display = 'none';

            // Populate title/desc/platform
            document.getElementById('liveTitle').textContent = state.title;
            document.getElementById('liveDesc').textContent = state.description || '';
            document.getElementById('livePlatformBadge').textContent = state.platform;

            // Stream embed
            const embedBox = document.getElementById('liveStreamEmbed');
            if (state.streamUrl) {
                embedBox.innerHTML = '<iframe src="' + state.streamUrl + '" width="100%" height="100%" frameborder="0" allow="autoplay;encrypted-media" allowfullscreen style="border-radius:12px;"></iframe>';
                embedBox.style.background = '#000';
            } else {
                embedBox.innerHTML = '<div style="text-align:center;color:rgba(255,255,255,0.4);padding:2rem;"><i class="fa-solid fa-tower-broadcast" style="font-size:3rem;margin-bottom:1rem;display:block;"></i><p style="font-size:0.85rem;">Stream is live on ' + state.platform + '.<br>Join there to watch!</p></div>';
            }

            // Chat
            const chatKey = CHAT_KEY;
            function getMessages() { return JSON.parse(localStorage.getItem(chatKey) || '[]'); }
            function saveMessages(msgs) { localStorage.setItem(chatKey, JSON.stringify(msgs.slice(-100))); }
            function renderMessages() {
                const msgs = getMessages();
                const box = document.getElementById('chatMessages');
                box.innerHTML = msgs.length === 0
                    ? '<p style="color:rgba(255,255,255,0.3);font-size:0.75rem;text-align:center;">No messages yet. Be the first!</p>'
                    : msgs.map(m => '<div style="margin-bottom:0.5rem;font-size:0.8rem;"><strong style="color:#f4a261;">' + m.name + ':</strong> <span style="color:rgba(255,255,255,0.8);">' + m.text + '</span></div>').join('');
                box.scrollTop = box.scrollHeight;
            }
            renderMessages();
            setInterval(renderMessages, 5000);

            const inputArea = document.getElementById('chatInputArea');
            if (user) {
                document.getElementById('chatUserBadge').textContent = 'Signed in as ' + user.name;
                inputArea.innerHTML = '<form id="chatForm" style="display:flex;gap:0.5rem;"><input type="text" id="chatInput" placeholder="Say something..." style="flex:1;background:rgba(255,255,255,0.08);border:1px solid rgba(255,255,255,0.12);border-radius:8px;padding:0.55rem 0.8rem;font-size:0.82rem;color:#fff;outline:none;font-family:Inter,sans-serif;"><button type="submit" style="background:linear-gradient(135deg,#f4a261,#e76f51);color:#fff;border:none;border-radius:8px;padding:0.55rem 1rem;font-size:0.8rem;font-weight:700;cursor:pointer;font-family:Inter,sans-serif;">Send</button></form>';
                document.getElementById('chatForm').addEventListener('submit', function(e) {
                    e.preventDefault();
                    const txt = document.getElementById('chatInput').value.trim();
                    if (!txt) return;
                    const msgs = getMessages();
                    msgs.push({ name: user.name, text: txt, time: Date.now() });
                    saveMessages(msgs);
                    document.getElementById('chatInput').value = '';
                    renderMessages();
                });
            } else {
                inputArea.innerHTML = '<div style="background:rgba(244,162,97,0.08);border:1px solid rgba(244,162,97,0.2);border-radius:8px;padding:0.75rem;text-align:center;font-size:0.78rem;color:rgba(255,255,255,0.5);"><i class="fa-solid fa-lock" style="color:#f4a261;"></i> <a href="user-auth.html?redirect=live.html" style="color:#f4a261;font-weight:600;">Sign in</a> or <a href="user-auth.html?tab=signup&redirect=live.html" style="color:#f4a261;font-weight:600;">create a free account</a> to chat</div>';
            }
        } else {
            document.getElementById('liveNow').style.display = 'none';
            document.getElementById('liveOffline').style.display = 'block';
        }

        // RSVP / Notify buttons â€” require login
        document.querySelectorAll('.btn-primary[onclick*="rsvp"], .btn-secondary[onclick*="calendar"], .notify-btn').forEach(btn => {
            btn.addEventListener('click', function(e) {
                if (!AUTH.getCurrentUser()) {
                    e.preventDefault(); e.stopImmediatePropagation();
                    window.location.href = 'user-auth.html?redirect=live.html';
                }
            }, true);
        });
    })();
    </script>
</body>
</html>
